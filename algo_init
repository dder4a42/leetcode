#!/bin/bash

# Algorithm Problem Environment Setup Script
# Usage: ./algo_init "Problem Title"

if [ $# -eq 0 ]; then
    echo "Usage: $0 \"Problem Title\""
    exit 1
fi

# Convert title to directory name (lowercase, spaces to underscores)
TITLE="$1"
DIR_NAME=$(echo "$TITLE" | tr '[:upper:]' '[:lower:]' | tr ' ' '_' | tr -cd 'a-z0-9_')

# Create directory
mkdir -p "$DIR_NAME"

# Create test_cases.txt with expected format:
# input_line
# expected_answer
# (blank line separator)
cat > "$DIR_NAME/test_cases.txt" << 'EOF'
# Test Cases Format:
# - Input lines (one or more)
# - "---" separator line
# - Expected Answer (Python literal - e.g., 9, "[0,1]", "[[1,2],[1,4]]")
# - Blank line separator between test cases
#
# Each input line becomes an argument to solve() method.

# Example 1: Single line input (traditional)
2 7 11 15
---
[0, 1]

# Example 2: Two line input (e.g., Two Sum with separate target)
[2, 7, 11, 15]
9
---
[0, 1]

# Example 3: Complex input with multiple lines
nums1 = [1,7,11]
nums2 = [2,4,6]
k = 3
---
[[1, 2], [1, 4], [1, 6]]

# Example 4: Matrix input
3
[[1,2,3],[4,5,6],[7,8,9]]
---
[[1,2,3],[4,5,6],[7,8,9]]

EOF

# Create solution.py with solver and test runner
cat > "$DIR_NAME/solution.py" << 'EOF'
#!/usr/bin/env python3
"""
LeetCode Problem: PROBLEM_TITLE
"""

import sys
import ast
from typing import List, Optional, Tuple, Any
from pathlib import Path

sys.path.insert(0, str(Path(__file__).parent.parent))
from utils import ListNode, TreeNode, auto_io, with_types, run_tests


class Solution:
    @auto_io
    def solve(self, *args) -> Any:
        """
        Main solver function.
        Implement your algorithm here.

        Type Hints for auto_io:
            Replace '*args' with your parameters and types:
                def solve(self, head: ListNode) -> ListNode:
                def solve(self, root: TreeNode) -> List[int]:
                def solve(self, nums: List[int], target: int) -> List[int]:

        Example - Single ListNode parameter:
            @auto_io
            def solve(self, head: ListNode) -> ListNode:
                return head  # Your logic here

        Example - TreeNode with List[int] return:
            @auto_io
            def solve(self, root: TreeNode) -> List[int]:
                return [1, 2, 3]  # Your logic here

        Available types:
            ListNode, TreeNode, List, int, str, bool, Optional[...]
        """
        pass


def main():
    """Main entry point."""
    solution = Solution()
    run_tests(solution)


if __name__ == "__main__":
    main()
EOF

# Make the script executable
chmod +x "$DIR_NAME/solution.py"

echo "✓ LeetCode environment created: $DIR_NAME/"
echo ""
echo "Files created:"
echo "  ├── $DIR_NAME/test_cases.txt  (add test cases: input / expected / blank line)"
echo "  └── $DIR_NAME/solution.py     (implement your solution)"
echo ""
echo "Test case format (in test_cases.txt):"
echo "  2 7 11 15"
echo "  ---"
echo "  [0, 1]"
echo ""
echo "  [2, 7, 11, 15]"
echo "  9"
echo "  ---"
echo "  [0, 1]"
echo ""
echo "To get started:"
echo "  cd $DIR_NAME"
echo "  python3 solution.py"
